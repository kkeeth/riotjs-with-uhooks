{"version":3,"file":"pages/about.bundle.js","mappings":"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","sources":["webpack://uhooks/./src/pages/todo.riot","webpack://uhooks/./node_modules/@webreflection/lie/esm/index.js","webpack://uhooks/./node_modules/uhooks/esm/hooks.js","webpack://uhooks/./node_modules/uhooks/esm/effect.js","webpack://uhooks/./node_modules/uhooks/esm/reducer.js","webpack://uhooks/./src/libs/withHook.js"],"sourcesContent":["<todo>\n  <div id=\"container\">\n    <h1>ToDo App</h1>\n\n    <form onsubmit={ addTodo }>\n      <input\n        name=\"todo\"\n        value=\"\"\n        oninput={ onInput }\n        placeholder=\"please input task\"\n      />\n      <button disabled={ !input }>\n        Add #{ todoList.length + 1 }\n      </button>\n        <button\n          class=\"danger\"\n          disabled={ !hasDoneTodo }\n          onclick={ deleteDoneTodos }\n        >\n          delete done\n        </button>\n    </form>\n    <hr />\n    <h4>todo list</h4>\n    <ul>\n      <li each={ todo in todoList } key={ todo.id }>\n        <label class={ todo.done ? 'completed' : null }>\n          <input\n            type=\"checkbox\"\n            checked={ todo.done }\n            onclick={ () => toggle(todo) }\n          >\n          { todo.title }\n        </label>\n        <button class=\"danger\" onclick={ () => deleteTodo(todo) }>\n          delete\n        </button>\n      </li>\n    </ul>\n    <p if={ todoList.length === 0 }>No Todos</p>\n  </div>\n\n  <script>\n    import { useState } from 'uhooks'\n    import { withHook } from '../libs/withHook'\n\n    export default withHook((props, _state) => {\n      const [nextId, setNextId] = useState(props.nextId)\n      const [todoList, setTodoList] = useState(props.todoList)\n      const [hasDoneTodo, setHasDoneTodo] = useState(props.todoList)\n      const [input, setInput] = useState(\"\")\n\n      const addTodo = (e) => {\n        e.preventDefault()\n        if (e.target.todo.value) {\n          const updatedTodoList = [\n            ...todoList,\n            {\n              id: nextId + 1,\n              title: e.target.todo.value,\n              done: false\n            }\n          ]\n\n          setHasDoneTodo(checkDoneTodo(updatedTodoList))\n          setTodoList(updatedTodoList)\n          setNextId(nextId + 1)\n          e.target.todo.value = \"\"\n        }\n      }\n      const onInput = (e) => {\n        setInput(e.target.value)\n      }\n      const toggle = (todo) => {\n        todo.done = !todo.done\n        setHasDoneTodo(checkDoneTodo())\n      }\n      const checkDoneTodo = (updatedTodoList) => {\n        const tmpList = updatedTodoList || todoList\n        return tmpList.some(item => item.done === true)\n      }\n      const deleteTodo = (todo) => {\n        if (window.confirm('本当に削除してもよろしいですか? ')) {\n          const updatedTodoList\n            = todoList.filter(item => item.id !== todo.id)\n          setHasDoneTodo(checkDoneTodo(updatedTodoList))\n          setTodoList(updatedTodoList)\n        }\n      }\n      const deleteDoneTodos = () => {\n        if (window.confirm('本当に全てのtodoを削除してもよろしいですか? ')) {\n          this.update({\n            hasDoneTodo: false,\n            todoList: this.state.todoList.filter(item => item.done !== true)\n          })\n        }\n      }\n\n      return {\n        input,\n        onInput,\n        todoList,\n        hasDoneTodo,\n        deleteDoneTodos,\n        addTodo,\n        toggle,\n        checkDoneTodo,\n        deleteTodo,\n        deleteDoneTodos,\n      }\n    })\n  </script>\n\n  <style>\n  h4 {\n    border-top: 1px solid #aaa;\n    padding-top: 1rem;\n  }\n\n  ul {\n    padding: 0;\n  }\n\n  li {\n    list-style-type: none;\n    padding: 0.2em 0;\n  }\n\n  li:hover {\n    background-color: #eee;\n  }\n\n  li .completed {\n    text-decoration: line-through;\n    color: #ccc;\n  }\n  </style>\n</todo>","export default typeof Promise === 'function' ? Promise : function (fn) {\n  let queue = [], resolved = 0, value;\n  fn($ => {\n    value = $;\n    resolved = 1;\n    queue.splice(0).forEach(then);\n  });\n  return {then};\n  function then(fn) {\n    return (resolved ? setTimeout(fn, 0, value) : queue.push(fn)), this;\n  }\n};\n","import Lie from '@webreflection/lie';\n\nlet info = null, schedule = new Set;\n\nconst invoke = effect => {\n  const {$, r, h} = effect;\n  if (isFunction(r)) {\n    fx.get(h).delete(effect);\n    r();\n  }\n  if (isFunction(effect.r = $()))\n    fx.get(h).add(effect);\n};\n\nconst runSchedule = () => {\n  const previous = schedule;\n  schedule = new Set;\n  previous.forEach(({h, c, a, e}) => {\n    // avoid running schedules when the hook is\n    // re-executed before such schedule happens\n    if (e)\n      h.apply(c, a);\n  });\n};\n\nexport const fx = new WeakMap;\nexport const effects = [];\nexport const layoutEffects = [];\n\nexport function different(value, i) {\n  return value !== this[i];\n};\n\nexport const dropEffect = hook => {\n  const effects = fx.get(hook);\n  if (effects)\n    wait.then(() => {\n      effects.forEach(effect => {\n        effect.r();\n        effect.r = null;\n      });\n      effects.clear();\n    });\n};\n\nexport const getInfo = () => info;\n\nexport const hasEffect = hook => fx.has(hook);\n\nexport const isFunction = f => typeof f === 'function';\n\nexport const hooked = callback => {\n  const current = {h: hook, c: null, a: null, e: 0, i: 0, s: []};\n  return hook;\n  function hook() {\n    const prev = info;\n    info = current;\n    current.e = current.i = 0;\n    try {\n      return callback.apply(current.c = this, current.a = arguments);\n    }\n    finally {\n      info = prev;\n      if (effects.length)\n        wait.then(effects.forEach.bind(effects.splice(0), invoke));\n      if (layoutEffects.length)\n        layoutEffects.splice(0).forEach(invoke);\n    }\n  }\n};\n\nexport const reschedule = info => {\n  if (!schedule.has(info)) {\n    info.e = 1;\n    schedule.add(info);\n    wait.then(runSchedule);\n  }\n};\n\nexport const wait = new Lie($ => $());\n","import {fx, effects, layoutEffects, different, getInfo} from './hooks.js';\n\nconst createEffect = stack => (callback, guards) => {\n  const info = getInfo();\n  const {i, s, h} = info;\n  const call = i === s.length;\n  info.i++;\n  if (call) {\n    if (!fx.has(h))\n      fx.set(h, new Set);\n    s[i] = {$: callback, _: guards, r: null, h};\n  }\n  if (call || !guards || guards.some(different, s[i]._))\n    stack.push(s[i]);\n  s[i].$ = callback;\n  s[i]._ = guards;\n};\n\nexport const useEffect = createEffect(effects);\n\nexport const useLayoutEffect = createEffect(layoutEffects);\n","import {getInfo, isFunction, reschedule} from './hooks.js';\n\nconst getValue = (value, f) => isFunction(f) ? f(value) : f;\n\nexport const useReducer = (reducer, value, init) => {\n  const info = getInfo();\n  const {i, s} = info;\n  if (i === s.length)\n    s.push({\n      $: isFunction(init) ?\n          init(value) : getValue(void 0, value),\n      set: value => {\n        s[i].$ = reducer(s[i].$, value);\n        reschedule(info);\n      }\n    });\n  const {$, set} = s[info.i++];\n  return [$, set];\n};\n\nexport const useState = value => useReducer(getValue, value);\n","import * as uhooks from 'uhooks'\n\nexport const withHook = (setup) => {\n  return {\n    onBeforeMount() {\n      this.isUpdated = false\n      uhooks.hooked(() => {\n        Object.assign(this, setup(this.props, this.state))\n        if (this.isUpdated) {\n          this.update()\n        }\n      })()\n      this.isUpdated = true\n    },\n  }\n}\n"],"names":["props","_state","nextId","setNextId","todoList","setTodoList","hasDoneTodo","setHasDoneTodo","input","setInput","checkDoneTodo","updatedTodoList","some","item","done","deleteDoneTodos","window","confirm","update","state","filter","onInput","e","target","value","addTodo","preventDefault","todo","id","title","toggle","deleteTodo","length","Promise","fn","queue","resolved","$","splice","forEach","then","setTimeout","push","this","info","schedule","Set","invoke","effect","r","h","isFunction","fx","get","delete","add","runSchedule","previous","c","a","apply","WeakMap","effects","layoutEffects","i","f","hooked","callback","current","hook","s","prev","arguments","wait","bind","createEffect","stack","guards","call","has","set","_","getValue","useState","reducer","init","reschedule","useReducer","withHook","setup","onBeforeMount","isUpdated","Object","assign"],"sourceRoot":""}